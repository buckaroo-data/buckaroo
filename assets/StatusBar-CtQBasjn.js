import{j as s}from"./jsx-runtime-DiklIkkE.js";import{r as h}from"./index-DRjF_FHU.js";import{_ as i}from"./lodash-CGIzQN7T.js";import{A,M as O,C as F}from"./main.esm-B8BDqAWP.js";import{b as g,c as P}from"./gridUtils-BzTbwOwX.js";import{u as M}from"./HistogramCell-CrXfgV_n.js";O.registerModules([F]);const G=function(e){return s.jsx("a",{href:"https://buckaroo-data.readthedocs.io/en/latest/feature_reference.html",target:"_blank",rel:"noopener noreferrer",children:"?"})},H=function(e){const o=e.value,r=e.context.buckarooOptions.df_display,c=t=>{const a=i.clone(e.context.buckarooState);a.df_display=t.target.value,e.context.setBuckarooState(a)};return s.jsx("select",{value:o,onChange:c,style:{width:"100%",background:"transparent",border:"none",color:"inherit"},children:r.map(t=>s.jsx("option",{value:t,children:t},t))})},K=function(e){const o=e.value,r=e.context.buckarooOptions.cleaning_method,c=t=>{const a=i.clone(e.context.buckarooState);a.cleaning_method=t.target.value,e.context.setBuckarooState(a)};return s.jsx("select",{value:o,onChange:c,style:{width:"100%",background:"transparent",border:"none",color:"inherit"},children:r.map(t=>s.jsx("option",{value:t,children:t},t))})},X=function(e){const o=e.value,r=e.context.buckarooOptions.post_processing,c=t=>{const a=i.clone(e.context.buckarooState);a.post_processing=t.target.value,e.context.setBuckarooState(a)};return s.jsx("select",{value:o,onChange:c,style:{width:"100%",background:"transparent",border:"none",color:"inherit"},children:r.map(t=>s.jsx("option",{value:t,children:t},t))})},z=function(e){const o=e.value==="1",r=c=>{const t=i.clone(e.context.buckarooState);t.show_commands=c.target.checked?"1":"0",e.context.setBuckarooState(t)};return s.jsx("input",{type:"checkbox",checked:o,onChange:r,style:{margin:"0 auto",display:"block"}})},_=function(e){const o=e.value,[r,c]=h.useState(o||""),t=()=>{e.setValue(r===""?null:r)},a=l=>{l.key==="Enter"&&(l.preventDefault(),t())};return s.jsxs("div",{className:"FakeSearchEditor",tabIndex:1,style:{display:"flex",flexDirection:"row",width:"100%"},children:[s.jsx("input",{type:"text",style:{flex:"1 1 auto",minWidth:0},value:r,onChange:({target:{value:l}})=>c(l),onSubmit:t,onKeyDown:a}),s.jsx("button",{style:{flex:"none"},onClick:t,children:"ðŸ”"}),s.jsx("button",{style:{flex:"none"},onClick:l=>{console.log("clickParams",l),e.setValue("")},children:"X"})]})},S=h.memo(({value:e,onValueChange:o,stopEditing:r})=>{const[c,t]=h.useState(!1),a=h.useRef(null);return h.useEffect(()=>{var l;(l=a.current)==null||l.focus(),t(!0)},[]),s.jsxs("div",{className:"SearchEditor",ref:a,tabIndex:1,style:{display:"flex",flexDirection:"row"},children:[s.jsx("input",{type:"text",style:{flex:"auto",width:150},value:e||"",onChange:({target:{value:l}})=>o(l===""?null:l)}),s.jsx("button",{style:{flex:"none"},onClick:()=>{o(""),r()},children:"X"})]})});function L({dfMeta:e,buckarooState:o,setBuckarooState:r,buckarooOptions:c,heightOverride:t}){var x;const a=c,l=i.fromPairs(i.map(i.keys(a),n=>[n,i.indexOf(a[n],o[n])])),C=(n,d)=>n===d.length-1?0:n+1,k=n=>{const d=a[n],u=l[n],f=C(u,d),q=d[f],y=i.clone(o);return y[n]=q,y},b=["quick_command_args","search","show_displayed_rows"],v=n=>{console.log("event.column",n.column,n.column.getColId());const d=n.column.getColId();if(!i.includes(b,d)&&i.includes(i.keys(o),d)){const u=k(d);r(u)}},R=h.useCallback(n=>{const{oldValue:d,newValue:u}=n;if(d!==u&&u!==null){const f={...o,quick_command_args:{search:[u]}};r(f)}},[]),j=[{field:"search",headerName:"search",width:200,cellEditor:S,cellRenderer:_,onCellValueChanged:R},{field:"df_display",headerName:"Î£",headerTooltip:"Summary Stats",width:120,cellRenderer:H},{field:"post_processing",headerName:"post processing",headerTooltip:"post process method",width:100,cellRenderer:X},{field:"show_commands",headerName:"Î»",headerTooltip:"Show Commands",width:30,cellRenderer:z},{field:"cleaning_method",headerName:"cleaning",headerTooltip:"Auto cleaning method",width:80,cellRenderer:K},{field:"help",headerName:"?",headerTooltip:"Help",width:30,cellRenderer:G},{field:"total_rows",width:100},{field:"filtered_rows",headerName:"filtered",width:85},{field:"rows_shown",headerName:"displayed",width:85,hide:e.rows_shown===-1},{field:"columns",width:75}],m=(x=o.quick_command_args)==null?void 0:x.search,N=m&&m.length===1?m[0]:"",T=[{total_rows:g.format(e.total_rows),columns:e.columns,rows_shown:g.format(e.rows_shown),cleaning_method:o.cleaning_method||"0",df_display:o.df_display,filtered_rows:g.format(e.filtered_rows),post_processing:o.post_processing,show_commands:o.show_commands||"0",search:N}],B={suppressRowClickSelection:!0},D=h.useRef(null),w=h.useCallback(n=>{console.log("StatusBar252 onGridReady statusbar",n)},[]),E={sortable:!1,cellStyle:{textAlign:"left"}},p=M(),I=h.useMemo(()=>P(p).withParams({headerFontSize:14,rowVerticalPaddingScale:.8}),[p]),V=p==="light"?"ag-theme-alpine":"ag-theme-alpine-dark";return s.jsx("div",{className:"status-bar",children:s.jsx("div",{className:`theme-hanger ${V}`,children:s.jsx(A,{ref:D,theme:I,loadThemeGoogleFonts:!0,onCellEditingStopped:w,onColumnHeaderClicked:v,onGridReady:w,gridOptions:B,defaultColDef:E,rowData:T,domLayout:"autoHeight",columnDefs:j,context:{buckarooState:o,setBuckarooState:r,buckarooOptions:c}})})})}_.__docgenInfo={description:"",methods:[],displayName:"fakeSearchCell"};S.__docgenInfo={description:"",methods:[],displayName:"SearchEditor"};L.__docgenInfo={description:"",methods:[],displayName:"StatusBar",props:{dfMeta:{required:!0,tsType:{name:"DFMeta"},description:""},buckarooState:{required:!0,tsType:{name:"BuckarooState"},description:""},setBuckarooState:{required:!0,tsType:{name:"ReactDispatch",raw:"React.Dispatch<React.SetStateAction<BuckarooState>>",elements:[{name:"ReactSetStateAction",raw:"React.SetStateAction<BuckarooState>",elements:[{name:"BuckarooState"}]}]},description:""},buckarooOptions:{required:!0,tsType:{name:"BuckarooOptions"},description:""},heightOverride:{required:!1,tsType:{name:"number"},description:""}}};export{L as S};
