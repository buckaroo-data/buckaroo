import{j as s}from"./jsx-runtime-DiklIkkE.js";import{r as d}from"./index-DRjF_FHU.js";import{A as F,M as P,C as M}from"./index.esm-DnTYv4rp.js";import{b as g,c as G,i as _,d as H}from"./gridUtils-Bae6TPFw.js";import{u as K}from"./HistogramCell-Bzivjlh2.js";import{f as X}from"./fromPairs-Dx9PT-t0.js";import{m as z}from"./isString-CNnovG4X.js";import{k as S}from"./_baseEach-B-y44WsN.js";import{c as u}from"./clone-ZfB6SeuH.js";P.registerModules([M]);const L=function(e){return s.jsx("a",{href:"https://buckaroo-data.readthedocs.io/en/latest/feature_reference.html",target:"_blank",rel:"noopener noreferrer",children:"?"})},W=function(e){const o=e.value,r=e.context.buckarooOptions.df_display,c=t=>{const a=u(e.context.buckarooState);a.df_display=t.target.value,e.context.setBuckarooState(a)};return s.jsx("select",{value:o,onChange:c,style:{width:"100%",background:"transparent",border:"none",color:"inherit"},children:r.map(t=>s.jsx("option",{value:t,children:t},t))})},$=function(e){const o=e.value,r=e.context.buckarooOptions.cleaning_method,c=t=>{const a=u(e.context.buckarooState);a.cleaning_method=t.target.value,e.context.setBuckarooState(a)};return s.jsx("select",{value:o,onChange:c,style:{width:"100%",background:"transparent",border:"none",color:"inherit"},children:r.map(t=>s.jsx("option",{value:t,children:t},t))})},J=function(e){const o=e.value,r=e.context.buckarooOptions.post_processing,c=t=>{const a=u(e.context.buckarooState);a.post_processing=t.target.value,e.context.setBuckarooState(a)};return s.jsx("select",{value:o,onChange:c,style:{width:"100%",background:"transparent",border:"none",color:"inherit"},children:r.map(t=>s.jsx("option",{value:t,children:t},t))})},Q=function(e){const o=e.value==="1",r=c=>{const t=u(e.context.buckarooState);t.show_commands=c.target.checked?"1":"0",e.context.setBuckarooState(t)};return s.jsx("input",{type:"checkbox",checked:o,onChange:r,style:{margin:"0 auto",display:"block"}})},C=function(e){const o=e.value,[r,c]=d.useState(o||""),t=()=>{e.setValue(r===""?null:r)},a=l=>{l.key==="Enter"&&(l.preventDefault(),t())};return s.jsxs("div",{className:"FakeSearchEditor",tabIndex:1,style:{display:"flex",flexDirection:"row",width:"100%"},children:[s.jsx("input",{type:"text",style:{flex:"1 1 auto",minWidth:0},value:r,onChange:({target:{value:l}})=>c(l),onSubmit:t,onKeyDown:a}),s.jsx("button",{style:{flex:"none"},onClick:t,children:"ðŸ”"}),s.jsx("button",{style:{flex:"none"},onClick:l=>{console.log("clickParams",l),e.setValue("")},children:"X"})]})},k=d.memo(({value:e,onValueChange:o,stopEditing:r})=>{const[c,t]=d.useState(!1),a=d.useRef(null);return d.useEffect(()=>{var l;(l=a.current)==null||l.focus(),t(!0)},[]),s.jsxs("div",{className:"SearchEditor",ref:a,tabIndex:1,style:{display:"flex",flexDirection:"row"},children:[s.jsx("input",{type:"text",style:{flex:"auto",width:150},value:e||"",onChange:({target:{value:l}})=>o(l===""?null:l)}),s.jsx("button",{style:{flex:"none"},onClick:()=>{o(""),r()},children:"X"})]})});function U({dfMeta:e,buckarooState:o,setBuckarooState:r,buckarooOptions:c,heightOverride:t}){var x;const a=c,l=X(z(S(a),n=>[n,H(a[n],o[n])])),b=(n,i)=>n===i.length-1?0:n+1,v=n=>{const i=a[n],h=l[n],f=b(h,i),O=i[f],y=u(o);return y[n]=O,y},R=["quick_command_args","search","show_displayed_rows"],j=n=>{console.log("event.column",n.column,n.column.getColId());const i=n.column.getColId();if(!_(R,i)&&_(S(o),i)){const h=v(i);r(h)}},N=d.useCallback(n=>{const{oldValue:i,newValue:h}=n;if(i!==h&&h!==null){const f={...o,quick_command_args:{search:[h]}};r(f)}},[]),T=[{field:"search",headerName:"search",width:200,cellEditor:k,cellRenderer:C,onCellValueChanged:N},{field:"df_display",headerName:"Î£",headerTooltip:"Summary Stats",width:120,cellRenderer:W},{field:"post_processing",headerName:"post processing",headerTooltip:"post process method",width:100,cellRenderer:J},{field:"show_commands",headerName:"Î»",headerTooltip:"Show Commands",width:30,cellRenderer:Q},{field:"cleaning_method",headerName:"cleaning",headerTooltip:"Auto cleaning method",width:80,cellRenderer:$},{field:"help",headerName:"?",headerTooltip:"Help",width:30,cellRenderer:L},{field:"total_rows",width:100},{field:"filtered_rows",headerName:"filtered",width:85},{field:"rows_shown",headerName:"displayed",width:85,hide:e.rows_shown===-1},{field:"columns",width:75}],m=(x=o.quick_command_args)==null?void 0:x.search,B=m&&m.length===1?m[0]:"",D=[{total_rows:g.format(e.total_rows),columns:e.columns,rows_shown:g.format(e.rows_shown),cleaning_method:o.cleaning_method||"0",df_display:o.df_display,filtered_rows:g.format(e.filtered_rows),post_processing:o.post_processing,show_commands:o.show_commands||"0",search:B}],E={suppressRowClickSelection:!0},I=d.useRef(null),w=d.useCallback(n=>{console.log("StatusBar252 onGridReady statusbar",n)},[]),V={sortable:!1,cellStyle:{textAlign:"left"}},p=K(),q=d.useMemo(()=>G(p).withParams({headerFontSize:14,rowVerticalPaddingScale:.8}),[p]),A=p==="light"?"ag-theme-alpine":"ag-theme-alpine-dark";return s.jsx("div",{className:"status-bar",children:s.jsx("div",{className:`theme-hanger ${A}`,children:s.jsx(F,{ref:I,theme:q,loadThemeGoogleFonts:!0,onCellEditingStopped:w,onColumnHeaderClicked:j,onGridReady:w,gridOptions:E,defaultColDef:V,rowData:D,domLayout:"autoHeight",columnDefs:T,context:{buckarooState:o,setBuckarooState:r,buckarooOptions:c}})})})}C.__docgenInfo={description:"",methods:[],displayName:"fakeSearchCell"};k.__docgenInfo={description:"",methods:[],displayName:"SearchEditor"};U.__docgenInfo={description:"",methods:[],displayName:"StatusBar",props:{dfMeta:{required:!0,tsType:{name:"DFMeta"},description:""},buckarooState:{required:!0,tsType:{name:"BuckarooState"},description:""},setBuckarooState:{required:!0,tsType:{name:"ReactDispatch",raw:"React.Dispatch<React.SetStateAction<BuckarooState>>",elements:[{name:"ReactSetStateAction",raw:"React.SetStateAction<BuckarooState>",elements:[{name:"BuckarooState"}]}]},description:""},buckarooOptions:{required:!0,tsType:{name:"BuckarooOptions"},description:""},heightOverride:{required:!1,tsType:{name:"number"},description:""}}};export{U as S};
