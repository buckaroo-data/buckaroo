import{j as r}from"./jsx-runtime-DiklIkkE.js";import{r as u}from"./index-DRjF_FHU.js";import{_ as i}from"./lodash-CGIzQN7T.js";import{A as F,M as H,C as P}from"./main.esm-B8BDqAWP.js";import{b as p,r as M,c as G}from"./gridUtils-Dg-0Ps4z.js";import{u as K}from"./HistogramCell-CrXfgV_n.js";H.registerModules([P]);const X=function(e){return r.jsx("a",{href:"https://buckaroo-data.readthedocs.io/en/latest/feature_reference.html",target:"_blank",rel:"noopener noreferrer",children:"?"})},z=function(e){const o=e.value,a=e.context.buckarooOptions.df_display,c=t=>{const s=i.clone(e.context.buckarooState);s.df_display=t.target.value,e.context.setBuckarooState(s)};return r.jsx("select",{value:o,onChange:c,style:{width:"100%",background:"transparent",border:"none",color:"inherit"},children:a.map(t=>r.jsx("option",{value:t,children:t},t))})},L=function(e){const o=e.value,a=e.context.buckarooOptions.cleaning_method,c=t=>{const s=i.clone(e.context.buckarooState);s.cleaning_method=t.target.value,e.context.setBuckarooState(s)};return r.jsx("select",{value:o,onChange:c,style:{width:"100%",background:"transparent",border:"none",color:"inherit"},children:a.map(t=>r.jsx("option",{value:t,children:t},t))})},W=function(e){const o=e.value,a=e.context.buckarooOptions.post_processing,c=t=>{const s=i.clone(e.context.buckarooState);s.post_processing=t.target.value,e.context.setBuckarooState(s)};return r.jsx("select",{value:o,onChange:c,style:{width:"100%",background:"transparent",border:"none",color:"inherit"},children:a.map(t=>r.jsx("option",{value:t,children:t},t))})},$=function(e){const o=e.value==="1",a=c=>{const t=i.clone(e.context.buckarooState);t.show_commands=c.target.checked?"1":"0",e.context.setBuckarooState(t)};return r.jsx("input",{type:"checkbox",checked:o,onChange:a,style:{margin:"0 auto",display:"block"}})},C=function(e){const o=e.value,[a,c]=u.useState(o||""),t=()=>{e.setValue(a===""?null:a)},s=l=>{l.key==="Enter"&&(l.preventDefault(),t())};return r.jsxs("div",{className:"FakeSearchEditor",tabIndex:1,style:{display:"flex",flexDirection:"row",width:"100%"},children:[r.jsx("input",{type:"text",style:{flex:"1 1 auto",minWidth:0},value:a,onChange:({target:{value:l}})=>c(l),onSubmit:t,onKeyDown:s}),r.jsx("button",{style:{flex:"none"},onClick:t,children:"ðŸ”"}),r.jsx("button",{style:{flex:"none"},onClick:l=>{console.log("clickParams",l),e.setValue("")},children:"X"})]})},S=u.memo(({value:e,onValueChange:o,stopEditing:a})=>{const[c,t]=u.useState(!1),s=u.useRef(null);return u.useEffect(()=>{var l;(l=s.current)==null||l.focus(),t(!0)},[]),r.jsxs("div",{className:"SearchEditor",ref:s,tabIndex:1,style:{display:"flex",flexDirection:"row"},children:[r.jsx("input",{type:"text",style:{flex:"auto",width:150},value:e||"",onChange:({target:{value:l}})=>o(l===""?null:l)}),r.jsx("button",{style:{flex:"none"},onClick:()=>{o(""),a()},children:"X"})]})});function J({dfMeta:e,buckarooState:o,setBuckarooState:a,buckarooOptions:c,heightOverride:t,themeConfig:s}){var y;const l=c,k=i.fromPairs(i.map(i.keys(l),n=>[n,i.indexOf(l[n],o[n])])),_=(n,d)=>n===d.length-1?0:n+1,v=n=>{const d=l[n],h=k[n],f=_(h,d),O=d[f],x=i.clone(o);return x[n]=O,x},b=["quick_command_args","search","show_displayed_rows"],R=n=>{console.log("event.column",n.column,n.column.getColId());const d=n.column.getColId();if(!i.includes(b,d)&&i.includes(i.keys(o),d)){const h=v(d);a(h)}},j=u.useCallback(n=>{const{oldValue:d,newValue:h}=n;if(d!==h&&h!==null){const f={...o,quick_command_args:{search:[h]}};a(f)}},[]),q=[{field:"search",headerName:"search",width:200,cellEditor:S,cellRenderer:C,onCellValueChanged:j},{field:"df_display",headerName:"Î£",headerTooltip:"Summary Stats",width:120,cellRenderer:z},{field:"post_processing",headerName:"post processing",headerTooltip:"post process method",width:100,cellRenderer:W},{field:"show_commands",headerName:"Î»",headerTooltip:"Show Commands",width:30,cellRenderer:$},{field:"cleaning_method",headerName:"cleaning",headerTooltip:"Auto cleaning method",width:80,cellRenderer:L},{field:"help",headerName:"?",headerTooltip:"Help",width:30,cellRenderer:X},{field:"total_rows",width:100},{field:"filtered_rows",headerName:"filtered",width:85},{field:"rows_shown",headerName:"displayed",width:85,hide:e.rows_shown===-1},{field:"columns",width:75}],m=(y=o.quick_command_args)==null?void 0:y.search,N=m&&m.length===1?m[0]:"",B=[{total_rows:p.format(e.total_rows),columns:e.columns,rows_shown:p.format(e.rows_shown),cleaning_method:o.cleaning_method||"0",df_display:o.df_display,filtered_rows:p.format(e.filtered_rows),post_processing:o.post_processing,show_commands:o.show_commands||"0",search:N}],T={suppressRowClickSelection:!0},D=u.useRef(null),w=u.useCallback(n=>{console.log("StatusBar252 onGridReady statusbar",n)},[]),E={sortable:!1,cellStyle:{textAlign:"left"}},I=K(),g=M(I,s),V=u.useMemo(()=>G(g,s).withParams({headerFontSize:14,rowVerticalPaddingScale:.8}),[g,s]),A=g==="light"?"ag-theme-alpine":"ag-theme-alpine-dark";return r.jsx("div",{className:"status-bar",children:r.jsx("div",{className:`theme-hanger ${A}`,children:r.jsx(F,{ref:D,theme:V,loadThemeGoogleFonts:!0,onCellEditingStopped:w,onColumnHeaderClicked:R,onGridReady:w,gridOptions:T,defaultColDef:E,rowData:B,domLayout:"autoHeight",columnDefs:q,context:{buckarooState:o,setBuckarooState:a,buckarooOptions:c}})})})}C.__docgenInfo={description:"",methods:[],displayName:"fakeSearchCell"};S.__docgenInfo={description:"",methods:[],displayName:"SearchEditor"};J.__docgenInfo={description:"",methods:[],displayName:"StatusBar",props:{dfMeta:{required:!0,tsType:{name:"DFMeta"},description:""},buckarooState:{required:!0,tsType:{name:"BuckarooState"},description:""},setBuckarooState:{required:!0,tsType:{name:"ReactDispatch",raw:"React.Dispatch<React.SetStateAction<BuckarooState>>",elements:[{name:"ReactSetStateAction",raw:"React.SetStateAction<BuckarooState>",elements:[{name:"BuckarooState"}]}]},description:""},buckarooOptions:{required:!0,tsType:{name:"BuckarooOptions"},description:""},heightOverride:{required:!1,tsType:{name:"number"},description:""},themeConfig:{required:!1,tsType:{name:"signature",type:"object",raw:`{
    colorScheme?: 'light' | 'dark' | 'auto';
    accentColor?: string;
    accentHoverColor?: string;
    backgroundColor?: string;
    foregroundColor?: string;
    oddRowBackgroundColor?: string;
    borderColor?: string;
}`,signature:{properties:[{key:"colorScheme",value:{name:"union",raw:"'light' | 'dark' | 'auto'",elements:[{name:"literal",value:"'light'"},{name:"literal",value:"'dark'"},{name:"literal",value:"'auto'"}],required:!1}},{key:"accentColor",value:{name:"string",required:!1}},{key:"accentHoverColor",value:{name:"string",required:!1}},{key:"backgroundColor",value:{name:"string",required:!1}},{key:"foregroundColor",value:{name:"string",required:!1}},{key:"oddRowBackgroundColor",value:{name:"string",required:!1}},{key:"borderColor",value:{name:"string",required:!1}}]}},description:""}}};export{J as S};
